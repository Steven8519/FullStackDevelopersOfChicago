{"version":3,"sources":["../../../developers-app/controllers/UserController.js"],"names":["User","require","Promise","bcrypt","module","exports","get","params","isRaw","resolve","reject","find","error","users","list","i","length","user","push","summary","getById","id","findById","post","password","hashSync","create","put","findByIdAndUpdate","new"],"mappings":";;AAAA;;;AAGA,IAAMA,OAAOC,QAAQ,gBAAR,CAAb;AACA,IAAMC,UAAUD,QAAQ,UAAR,CAAhB;AACA,IAAME,SAASF,QAAQ,UAAR,CAAf;;AAEAG,OAAOC,OAAP,GAAiB;AACbC,SAAK,aAAUC,MAAV,EAAkBC,KAAlB,EAAyB;AAC1B,eAAO,IAAIN,OAAJ,CAAY,UAAUO,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C;;AACAV,iBAAKW,IAAL,CAAUJ,MAAV,EAAkB,UAAUK,KAAV,EAAiBC,KAAjB,EAAwB;AACtC,oBAAID,KAAJ,EAAW;AACPF,2BAAOE,KAAP;AACH,iBAFD,MAEO;;AAEH,wBAAGJ,SAAS,IAAZ,EAAkB;AACdC,gCAAQI,KAAR;AACH,qBAFD,MAEO;AACH,4BAAIC,OAAO,EAAX;AACA,6BAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,MAAMG,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,gCAAIE,OAAOJ,MAAME,CAAN,CAAX;AACAD,iCAAKI,IAAL,CAAUD,KAAKE,OAAL,EAAV;AAEH;AACDV,gCAAQK,IAAR;AACH;AACJ;AACJ,aAjBD;AAkBH,SApBM,CAAP;AAqBH,KAvBY;;AAyBbM,aAAS,iBAAUC,EAAV,EAAc;AACf,eAAO,IAAInB,OAAJ,CAAY,UAASO,OAAT,EAAkBC,MAAlB,EAA0B;AAC7CV,iBAAKsB,QAAL,CAAcD,EAAd,EAAkB,UAAUT,KAAV,EAAiBK,IAAjB,EAAuB;AACrC,oBAAIL,KAAJ,EAAW;AACPF,2BAAOE,KAAP;AACH,iBAFD,MAEO;AACHH,4BAAQQ,KAAKE,OAAL,EAAR;AACH;AACJ,aAND;AAQH,SATU,CAAP;AAUP,KApCY;AAqCbI,UAAM,cAAUhB,MAAV,EAAkB;AACpB,eAAO,IAAIL,OAAJ,CAAY,UAAUO,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,gBAAMc,WAAWjB,OAAOiB,QAAxB;AACAjB,mBAAO,UAAP,IAAqBJ,OAAOsB,QAAP,CAAgBD,QAAhB,EAA0B,EAA1B,CAArB;AACAxB,iBAAK0B,MAAL,CAAYnB,MAAZ,EAAoB,UAAUK,KAAV,EAAiBK,IAAjB,EAAuB;AACvC,oBAAIL,KAAJ,EAAW;AACPF,2BAAOE,KAAP;AACH,iBAFD,MAEO;AACHH,4BAAQQ,KAAKE,OAAL,EAAR;AACH;AACJ,aAND;AAOH,SAVM,CAAP;AAWH,KAjDY;;AAmDbQ,SAAK,aAAUN,EAAV,EAAcd,MAAd,EAAsB;AACvB,eAAO,IAAIL,OAAJ,CAAY,UAAUO,OAAV,EAAmBC,MAAnB,EAA2B;AAC1CV,iBAAK4B,iBAAL,CAAuBP,EAAvB,EAA2Bd,MAA3B,EAAmC,EAACsB,KAAK,IAAN,EAAnC,EAAgD,UAAUjB,KAAV,EAAiBK,IAAjB,EAAuB;AACnE,oBAAGL,KAAH,EAAU;AACNF,2BAAOE,KAAP;AACH,iBAFD,MAEO;AACHH,4BAAQQ,KAAKE,OAAL,EAAR;AACH;AACJ,aAND;AAOH,SARM,CAAP;AASH;AA7DY,CAAjB","file":"UserController.js","sourcesContent":["/**\n * Created by stevenmcdonald on 3/6/17.\n */\nconst User = require(\"../models/user\");\nconst Promise = require(\"bluebird\");\nconst bcrypt = require(\"bcryptjs\");\n\nmodule.exports = {\n    get: function (params, isRaw) {\n        return new Promise(function (resolve, reject) {\n            \"use strict\";\n            User.find(params, function (error, users) {\n                if (error) {\n                    reject(error)\n                } else {\n\n                    if(isRaw == true) {\n                        resolve(users);\n                    } else {\n                        var list = [];\n                        for (var i = 0; i < users.length; i++) {\n                            let user = users[i];\n                            list.push(user.summary());\n\n                        }\n                        resolve(list);\n                    }\n                }\n            });\n        });\n    },\n\n    getById: function (id) {\n            return new Promise(function(resolve, reject) {\n            User.findById(id, function (error, user) {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(user.summary());\n                }\n            });\n\n        });\n    },\n    post: function (params) {\n        return new Promise(function (resolve, reject) {\n            const password = params.password;\n            params[\"password\"] = bcrypt.hashSync(password, 10);\n            User.create(params, function (error, user) {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(user.summary());\n                }\n            });\n        });\n    },\n\n    put: function (id, params) {\n        return new Promise(function (resolve, reject) {\n            User.findByIdAndUpdate(id, params, {new: true}, function (error, user) {\n                if(error) {\n                    reject(error);\n                } else {\n                    resolve(user.summary());\n                }\n            });\n        });\n    }\n};\n"]}